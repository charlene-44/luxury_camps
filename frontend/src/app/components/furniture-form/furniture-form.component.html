<!-- frontend\src\app\components\furniture-form\furniture-form.component.html -->

<div class="p-8 max-w-3xl mx-auto">
  <form [formGroup]="furnitureForm" (ngSubmit)="submit()">
    <!-- Message d'erreur -->
    <div *ngIf="error" class="text-red-600 mb-4">{{ error }}</div>

    <!-- Nom -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">Nom</label>
      <input
        type="text"
        formControlName="name"
        class="w-full p-2 border rounded"
        placeholder="Nom du meuble"
      />
    </div>

    <!-- Description -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">Description</label>
      <textarea
        formControlName="description"
        rows="3"
        class="w-full p-2 border rounded"
        placeholder="Description"
      ></textarea>
    </div>

    <!-- Taille et Couleur -->
    <div class="flex space-x-4 mb-4">
      <div class="w-1/2">
        <label class="block text-sm font-medium text-white mb-2">Taille</label>
        <input
          type="text"
          formControlName="size"
          class="w-full p-2 border rounded"
          placeholder="ex: 120x80 cm"
        />
      </div>
      <div class="w-1/2">
        <label class="block text-sm font-medium text-white mb-2">Couleur</label>
        <input
          type="text"
          formControlName="colour"
          class="w-full p-2 border rounded"
          placeholder="ex: Marron"
        />
      </div>
    </div>

    <!-- Quantité et Prix -->
    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium text-white mb-2">Quantité</label>
        <input
          type="number"
          formControlName="quantity"
          class="w-full p-2 border rounded"
          placeholder="Quantité"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-white mb-2">Prix (€)</label>
        <input
          type="number"
          step="0.01"
          formControlName="price"
          class="w-full p-2 border rounded"
          placeholder="Prix"
        />
      </div>
    </div>

    <!-- Statut -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">Statut</label>
      <select formControlName="status" class="w-full p-2 border rounded">
        <option value="">Sélectionner un statut</option>
        <option *ngFor="let status of statuses" [value]="status">
          {{ status }}
        </option>
      </select>
    </div>

    <!-- Type -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">Type</label>
      <select formControlName="typeId" class="w-full p-2 border rounded">
        <option value="">Sélectionner un type</option>
        <option *ngFor="let type of furnitureTypes" [value]="type.id">
          {{ type.name }}
        </option>
      </select>
    </div>

    <!-- Matériaux -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">Matériaux</label>
      <div *ngFor="let material of materials" class="flex items-center space-x-2">
        <input
          type="checkbox"
          [value]="material.id"
          (change)="onMaterialChange($event)"
          [checked]="(furnitureForm.get('materialIds')?.value || []).indexOf(material.id) !== -1"
          class="mr-2"
        />
        <span>{{ material.name }}</span>
      </div>
    </div>

    <!-- URL des images -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-white mb-2">
        URL des images
      </label>
      <div formArrayName="imageUrls" class="space-y-2">
        <div
          *ngFor="let ctrl of imageUrls.controls; let i = index"
          class="flex items-center space-x-2"
        >
          <input
            [formControlName]="i"
            type="text"
            placeholder="URL de l'image"
            class="w-full p-2 border rounded"
          />
          <button
            type="button"
            (click)="removeImageUrl(i)"
            class="bg-red-600 text-white px-2 py-1 rounded"
          >
            Supprimer
          </button>
        </div>
      </div>
      <button
        type="button"
        (click)="addImageUrl()"
        class="mt-2 bg-cyan-950 text-white px-4 py-2 rounded"
      >
        Ajouter une image
      </button>
    </div>

    <!-- Bouton de soumission -->
    <div class="flex justify-end">
      <button
        type="submit"
        [disabled]="loading"
        class="bg-cyan-950 text-white px-4 py-2 rounded"
      >
        {{ loading ? "Envoi en cours..." : "Valider" }}
      </button>
    </div>
  </form>
</div>

